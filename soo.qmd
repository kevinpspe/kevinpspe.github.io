# Overview of Selection on Observables {.unnumbered}

Our issue in causal inference is that a confounder is causing pre-existing differences:

::: center-graph
```{dot}
//| fig-width: 4
//| fig-height: 1.1
digraph example2 {
  // Nodes
  D [shape=box, pos = "0,0!", label="Receiving Scholarship"]
  X [shape=box, pos = "2,0!", label="Smartness (Confounder)"]
  Y [shape=box, pos = "1,-1!", label="University Grades"]

  // Edges
  {rank=same; D -> Y [label="Causal Effect"]}
  X -> D
  X -> Y [dir=both]
  
  graph [nodesep=0.5, ranksep=0.5]

}
```
:::

By definition, as the confounder **changes**, your likelihood of getting treatment changes.As the confounder **changes**, the outcome value will also change.

These issues occur when the confounder **changes** in value. So what if we hold the confounders constant? Let us assume that the confounder, smartness, has two categories: smart and dumb. We divide our study individuals into these two categories (smart and dumb). Within each category, we calculate the causal effect:

$$
\begin{align}
\tau_\text{smart} & = \purple{\mean Y_\text{smart}^{(1)}} - \purple{\mean Y_\text{smart}^{(0)}} \\
\tau_\text{dumb} & = \purple{\mean Y_\text{dumb}^{(1)}} - \purple{\mean Y_\text{dumb}^{(0)}}
\end{align}
$$

::: small
Obviously, most confounders will not have only 2 values. But the same intuition applies - for each value of confounders, we split all individuals into groups, and calculate the average treatment effect within each group.
:::

Within both of these categories, the confounder is not changing - it is constant. Thus, within each category, correlation is equal to causation, as there is no selection bias. That means we can calculate the effects within each category. Then, we can average them to get a final causal effect:

$$
\mean\tau = \text{average of } \tau_\text{smart} \text{ and } \tau_\text{dumb}
$$

And wow! we have calculated the overall treatment effect. But we are not done - we need assumptions to ensure this works, and estimators to actually implement them (both right below this).

<br />

### Important Assumptions

+---------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
| Assumption                                              | Description                                                                                                                                               | How to Check                                  |
+:========================================================+:==========================================================================================================================================================+:==============================================+
| [Conditional Ignorability]{.mark}                       | This means that we must account for **all** possible confounders (cannot miss a single one).                                                              | We can conduct balance checks.                |
+---------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
| [Common Support]{.mark}                                 | This means no one can have a 100% chance of being in treatment or control. They always have a chance to be in either, no matter their confounding values. | Hard to check. Use theoretical reasoning.     |
+---------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
| [Stable Unit Treatment Value Assumption (SUTVA)]{.mark} | This means that if Ava is treated, that does not affect Mia's outcome (and for any other 2 individuals).                                                  | We have to use our own theoretical reasoning. |
+---------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+

: {tbl-colwidths="\[27,45,28\]" .bordered}

<br />

### Possible Estimators to Use

+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| Estimator                                      | Kevin's Rating                                                                                                                          | Estimand            |
+================================================+=========================================================================================================================================+=====================+
| OLS Estimator (Regression)                     | <div>                                                                                                                                   | ATE                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| Fully Interacted Estimator (Regression)        | <div>                                                                                                                                   | ATE                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| [Distance Matching](distance.qmd)              | <div>                                                                                                                                   | ATT                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| [Propensity Score Matching](pscore.qmd)        | <div>                                                                                                                                   | ATT                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| [Genetic Matching](genetic.qmd)                | <div>                                                                                                                                   | ATT                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| [Inverse Probability Weighting](weighting.qmd) | <div>                                                                                                                                   | ATE                 |
|                                                |                                                                                                                                         |                     |
|                                                | <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i> |                     |
|                                                |                                                                                                                                         |                     |
|                                                | </div>                                                                                                                                  |                     |
+------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+

: {tbl-colwidths="\[42,35,23\]" .bordered}

::: small
Important: You should not always go for the higher rated estimator. Each estimator has its strengths/weaknesses, which the links for each page explain in more detail.
:::

Use the sidebar or links in the table to access each estimator's page.
